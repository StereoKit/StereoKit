using System;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace StereoKit;

// This is for native bindings that the generator can't quite do

internal static unsafe partial class NativeAPI
{
	[LibraryImport(dll, StringMarshalling = utf8 )][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial IntPtr model_create_mem   (string filename, byte[] data, UIntPtr dataSize, IntPtr shader);
	[LibraryImport(dll                           )][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial IntPtr shader_create_mem  (byte[] data, UIntPtr dataSize);
	[LibraryImport(dll                           )][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void   sound_write_samples(IntPtr sound, IntPtr samples, ulong sampleCount);
	[LibraryImport(dll                           )][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial ulong  sound_read_samples (IntPtr sound, IntPtr samples, ulong sampleCount);

	[return: MarshalAs(UnmanagedType.Bool)]
	[LibraryImport(dll, StringMarshalling = utf16)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial bool ui_input_16    (string id, char* buffer, int bufferSize, Vec2 size, TextContext type);
	[return: MarshalAs(UnmanagedType.Bool)]
	[LibraryImport(dll, StringMarshalling = utf16)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial bool ui_input_at_16 (string id, char* buffer, int bufferSize, Vec3 windowRelativePos, Vec2 size, TextContext type);


	
	[return: MarshalAs(UnmanagedType.Bool)]
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial bool sk_step(Action appStep);
	// void sk_run(void (*)(void (*)()* app_step, void (*)()* app_shutdown)* app_step, void (*)(void (*)()* app_step, void (*)()* app_shutdown)* app_shutdown = nullptr)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void sk_run(Action appStep, Action appShutdown);

	// sound_t sound_generate(float (*)(float (*)(float sample_time)* audio_generator, float duration)* audio_generator, float duration)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial IntPtr sound_generate(AudioGenerator audioGenerator, float duration);

	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void tex_on_load(IntPtr texture, AssetOnLoadCallback assetOnLoadCallback, IntPtr context);
	// void tex_on_load_remove(tex_t texture, void (*)(tex_t texture, void (*)(tex_t texture, void* context)* asset_on_load_callback)* asset_on_load_callback)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void tex_on_load_remove(IntPtr texture, AssetOnLoadCallback assetOnLoadCallback);

	// void backend_openxr_add_callback_pre_session_create(void (*)(void (*)(void* context)* xr_pre_session_create_callback, void* context)* xr_pre_session_create_callback, void* context)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void backend_openxr_add_callback_pre_session_create(XRPreSessionCreateCallback xrPreSessionCreateCallback, IntPtr context);
	// void backend_openxr_add_callback_poll_event(void (*)(void (*)(void* context, void* XrEventDataBuffer)* xr_poll_event_callback, void* context)* xr_poll_event_callback, void* context)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void backend_openxr_add_callback_poll_event(XRPollEventCallback xrPollEventCallback, IntPtr context);
	// void backend_openxr_remove_callback_poll_event(void (*)(void (*)(void* context, void* XrEventDataBuffer)* xr_poll_event_callback)* xr_poll_event_callback)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void backend_openxr_remove_callback_poll_event(XRPollEventCallback xrPollEventCallback);

	// void log_subscribe(void (*)(void (*)(void* context, log_ level, const char* text)* log_callback, void* context)* log_callback, void* context = nullptr)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void log_subscribe(LogCallbackData logCallback, IntPtr context);
	// void log_unsubscribe(void (*)(void (*)(void* context, log_ level, const char* text)* log_callback, void* context)* log_callback, void* context = nullptr)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void log_unsubscribe(LogCallbackData logCallback, IntPtr context);

	// void platform_file_picker(picker_mode_ mode, void* callback_data, void (*)(picker_mode_ mode, void* callback_data, void (*)(void* callback_data, bool32_t confirmed, const char* filename_utf8)* picker_callback, const file_filter_t* in_arr_filters, int32_t filter_count)* picker_callback, const file_filter_t* in_arr_filters, int32_t filter_count)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void platform_file_picker(PickerMode mode, IntPtr callbackData, PickerCallback pickerCallback, FileFilter[] filters, int filterCount);

	// void render_screenshot_capture(void (*)(void (*)(color32* color_buffer, int32_t width, int32_t height, void* context)* render_on_screenshot_callback, pose_t viewpoint, int32_t width, int32_t height, float field_of_view_degrees, tex_format_ tex_format, void* context)* render_on_screenshot_callback, pose_t viewpoint, int32_t width, int32_t height, float field_of_view_degrees, tex_format_ tex_format = tex_format_rgba32, void* context = nullptr)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void render_screenshot_capture(RenderOnScreenshotCallback renderOnScreenshotCallback, Pose viewpoint, int width, int height, float fieldOfViewDegrees, TexFormat texFormat, IntPtr context);
	// void render_screenshot_viewpoint(void (*)(void (*)(color32* color_buffer, int32_t width, int32_t height, void* context)* render_on_screenshot_callback, matrix camera, matrix projection, int32_t width, int32_t height, render_layer_ layer_filter, render_clear_ clear, rect_t viewport, tex_format_ tex_format, void* context)* render_on_screenshot_callback, matrix camera, matrix projection, int32_t width, int32_t height, render_layer_ layer_filter = render_layer_all, render_clear_ clear = render_clear_all, rect_t viewport = =__VA_ARGS__#define sk_ref(x)x&#define sk_ref_arr(x)x*&#define SK_MakeFlag(enumType)inline enumType operator|(enumType a,enumType b){return static_cast<enumType>(static_cast<int>(a)|static_cast<int>(b));}inline enumType&operator|=(enumType&a,const enumType&b){a=a|b;return a;}inline enumType operator&(enumType a,enumType b){return static_cast<enumType>(static_cast<int>(a)&static_cast<int>(b));}inline enumType&operator&=(enumType&a,const enumType&b){a=a&b;return a;}inline enumType operator~(const enumType&a){return static_cast<enumType>(~static_cast<int>(a));}#else#define SK_EXTERN#define sk_default(...)#define sk_ref(x)x*#define sk_ref_arr(x)x**#define SK_MakeFlag(enumType)#endif#define SK_API SK_EXTERN SK_EXIMPORT#define SK_API_S SK_EXTERN SK_EXIMPORT#define SK_DeclarePrivateType(name)struct _##name;typedef struct _##name*name;#include<stdint.h>#include<stddef.h>#include<math.h>#include<uchar.h>#ifdef __cplusplus namespace sk{#endif typedef int32_t bool32_t;typedef uint64_t id_hash_t;typedef struct vec2{float x;float y;}vec2;typedef struct vec3{float x;float y;float z;}vec3;typedef struct vec4{float x;float y;float z;float w;}vec4;typedef struct quat{float x;float y;float z;float w;}quat;typedef union matrix{vec4 row[4];float m[16];}matrix;typedef struct rect_t{float x;float y;float w;float h;}rect_t;typedef struct ray_t{vec3 pos;vec3 dir;}ray_t;typedef struct bounds_t{vec3 center;vec3 dimensions;}bounds_t;typedef struct plane_t{vec3 normal;float d;}plane_t;typedef struct sphere_t{vec3 center;float radius;}sphere_t;typedef struct pose_t{vec3 position;quat orientation;}pose_t;typedef enum display_mode_{display_mode_mixedreality=0,display_mode_flatscreen=1,display_mode_none=2,}display_mode_;typedef enum app_mode_{app_mode_none=0,app_mode_xr,app_mode_simulator,app_mode_window,app_mode_offscreen,}app_mode_;typedef enum depth_mode_{depth_mode_default=0,depth_mode_d16,depth_mode_d32,depth_mode_stencil,}depth_mode_;typedef enum tex_format_{tex_format_none=0,tex_format_rgba32=1,tex_format_rgba32_linear=2,tex_format_bgra32=3,tex_format_bgra32_linear=4,tex_format_rg11b10=5,tex_format_rgb10a2=6,tex_format_rgba64=7,tex_format_rgba64u=tex_format_rgba64,tex_format_rgba64s=8,tex_format_rgba64f=9,tex_format_rgba128=10,tex_format_r8=11,tex_format_r16=12,tex_format_r16u=tex_format_r16,tex_format_r16s=13,tex_format_r16f=14,tex_format_r32=15,tex_format_depthstencil=16,tex_format_depth32=17,tex_format_depth16=18,tex_format_r8g8=19,tex_format_bc1_rgb_srgb,tex_format_bc1_rgb,tex_format_bc3_rgba_srgb,tex_format_bc3_rgba,tex_format_bc4_r,tex_format_bc5_rg,tex_format_bc7_rgba_srgb,tex_format_bc7_rgba,tex_format_etc1_rgb,tex_format_etc2_rgba_srgb,tex_format_etc2_rgba,tex_format_etc2_r11,tex_format_etc2_rg11,tex_format_pvrtc1_rgb_srgb,tex_format_pvrtc1_rgb,tex_format_pvrtc1_rgba_srgb,tex_format_pvrtc1_rgba,tex_format_pvrtc2_rgba_srgb,tex_format_pvrtc2_rgba,tex_format_astc4x4_rgba_srgb,tex_format_astc4x4_rgba,tex_format_atc_rgb,tex_format_atc_rgba,}tex_format_;typedef enum display_blend_{display_blend_none=0,display_blend_opaque=1<<0,display_blend_additive=1<<1,display_blend_blend=1<<2,display_blend_any_transparent=display_blend_additive|display_blend_blend,}display_blend_;SK_MakeFlag(display_blend_);typedef enum origin_mode_{origin_mode_local,origin_mode_floor,origin_mode_stage,}origin_mode_;typedef enum log_{log_none=0,log_diagnostic,log_inform,log_warning,log_error}log_;typedef enum render_layer_{render_layer_0=1<<0,render_layer_1=1<<1,render_layer_2=1<<2,render_layer_3=1<<3,render_layer_4=1<<4,render_layer_5=1<<5,render_layer_6=1<<6,render_layer_7=1<<7,render_layer_8=1<<8,render_layer_9=1<<9,render_layer_vfx=1<<10,render_layer_first_person=1<<11,render_layer_third_person=1<<12,render_layer_all=0xFFFF,render_layer_all_regular=render_layer_0|render_layer_1|render_layer_2|render_layer_3|render_layer_4|render_layer_5|render_layer_6|render_layer_7|render_layer_8|render_layer_9,render_layer_all_first_person=render_layer_all&~render_layer_third_person,render_layer_all_third_person=render_layer_all&~render_layer_first_person,}render_layer_;SK_MakeFlag(render_layer_);typedef enum app_focus_{app_focus_active,app_focus_background,app_focus_hidden,}app_focus_;typedef enum asset_state_{asset_state_error_unsupported=-3,asset_state_error_not_found=-2,asset_state_error=-1,asset_state_none=0,asset_state_loading,asset_state_loaded_meta,asset_state_loaded,}asset_state_;typedef enum memory_{memory_reference,memory_copy,}memory_;typedef enum standby_mode_{standby_mode_default=0,standby_mode_pause=1,standby_mode_slow=2,standby_mode_none=3}standby_mode_;typedef struct sk_settings_t{const char*app_name;const char*assets_folder;app_mode_ mode;display_blend_ blend_preference;bool32_t no_flatscreen_fallback;depth_mode_ depth_mode;tex_format_ color_format;log_ log_filter;bool32_t overlay_app;uint32_t overlay_priority;int32_t flatscreen_pos_x;int32_t flatscreen_pos_y;int32_t flatscreen_width;int32_t flatscreen_height;bool32_t disable_desktop_input_window;bool32_t disable_unfocused_sleep;float render_scaling;int32_t render_multisample;origin_mode_ origin;bool32_t omit_empty_frames;standby_mode_ standby_mode;void*android_java_vm;void*android_activity;}sk_settings_t;typedef struct system_info_t{int32_t display_width;int32_t display_height;bool32_t spatial_bridge_present;bool32_t perception_bridge_present;bool32_t eye_tracking_present;bool32_t overlay_app;bool32_t world_occlusion_present;bool32_t world_raycast_present;}system_info_t;typedef enum quit_reason_{quit_reason_none,quit_reason_user,quit_reason_error,quit_reason_initialization_failed,quit_reason_session_lost,}quit_reason_;SK_API bool32_t sk_init(sk_settings_t settings);SK_API void sk_set_window(void*window);SK_API void sk_set_window_xam(void*window);SK_API void sk_shutdown(void);SK_API void sk_shutdown_unsafe(void);SK_API void sk_quit(quit_reason_ quitReason sk_default(quit_reason_user));SK_API bool32_t sk_step(void(*app_step)(void));SK_API void sk_run(void(*app_step)(void),void(*app_shutdown)(void)sk_default(nullptr));SK_API void sk_run_data(void(*app_step)(void*step_data),void*step_data,void(*app_shutdown)(void*shutdown_data),void*shutdown_data);SK_API bool32_t sk_is_stepping(void);SK_API display_mode_ sk_active_display_mode(void);SK_API sk_settings_t sk_get_settings(void);SK_API system_info_t sk_system_info(void);SK_API const char*sk_version_name(void);SK_API uint64_t sk_version_id(void);SK_API app_focus_ sk_app_focus(void);SK_API quit_reason_ sk_get_quit_reason(void);typedef enum device_tracking_{device_tracking_none=0,device_tracking_3dof,device_tracking_6dof,}device_tracking_;typedef enum display_type_{display_type_none,display_type_stereo,display_type_flatscreen,}display_type_;typedef struct fov_info_t{float left;float right;float top;float bottom;}fov_info_t;SK_API display_type_ device_display_get_type(void);SK_API display_blend_ device_display_get_blend(void);SK_API bool32_t device_display_set_blend(display_blend_ blend);SK_API bool32_t device_display_valid_blend(display_blend_ blend);SK_API float device_display_get_refresh_rate(void);SK_API int32_t device_display_get_width(void);SK_API int32_t device_display_get_height(void);SK_API fov_info_t device_display_get_fov(void);SK_API device_tracking_ device_get_tracking(void);SK_API const char*device_get_name(void);SK_API const char*device_get_runtime(void);SK_API const char*device_get_gpu(void);SK_API bool32_t device_has_eye_gaze(void);SK_API bool32_t device_has_hand_tracking(void);typedef enum permission_type_{permission_type_microphone,permission_type_camera,permission_type_eye_input,permission_type_hand_tracking,permission_type_face_tracking,permission_type_scene,permission_type_max,}permission_type_;typedef enum permission_state_{permission_state_unavailable=-2,permission_state_capable=-1,permission_state_unknown=0,permission_state_granted=1,}permission_state_;SK_API permission_state_ permission_state(permission_type_ permission);SK_API bool32_t permission_is_interactive(permission_type_ permission);SK_API void permission_request(permission_type_ permission);SK_API double time_total_raw(void);SK_API float time_totalf_unscaled(void);SK_API double time_total_unscaled(void);SK_API float time_totalf(void);SK_API double time_total(void);SK_API float time_stepf_unscaled(void);SK_API double time_step_unscaled(void);SK_API float time_stepf(void);SK_API double time_step(void);SK_API void time_scale(double scale);SK_API void time_set_time(double total_seconds,double frame_elapsed_seconds sk_default(0));SK_API uint64_t time_frame(void);SK_API id_hash_t hash_string(const char*str_utf8);SK_API id_hash_t hash_string_with(const char*str_utf8,id_hash_t root);SK_API id_hash_t hash_int(int32_t value);SK_API id_hash_t hash_int_with(int32_t value,id_hash_t root);SK_API vec3 vec3_cross(const sk_ref(vec3)a,const sk_ref(vec3)b);SK_API quat quat_difference(const sk_ref(quat)a,const sk_ref(quat)b);SK_API quat quat_lookat(const sk_ref(vec3)from,const sk_ref(vec3)at);SK_API quat quat_lookat_up(const sk_ref(vec3)from,const sk_ref(vec3)at,const sk_ref(vec3)up);SK_API quat quat_from_angles(float pitch_x_deg,float yaw_y_deg,float roll_z_deg);SK_API quat quat_slerp(const sk_ref(quat)a,const sk_ref(quat)b,float t);SK_API quat quat_normalize(const sk_ref(quat)a);SK_API quat quat_inverse(const sk_ref(quat)a);SK_API quat quat_mul(const sk_ref(quat)a,const sk_ref(quat)b);SK_API vec3 quat_mul_vec(const sk_ref(quat)a,const sk_ref(vec3)b);SK_API void quat_to_axis_angle(quat a,vec3*out_axis,float*out_rotation_deg);SK_API matrix pose_matrix(const sk_ref(pose_t)pose,vec3 scale sk_default({1,1,1}));SK_API matrix pose_matrix_inv(pose_t pose,vec3 scale sk_default({1,1,1}));SK_API void pose_matrix_out(const sk_ref(pose_t)pose,sk_ref(matrix)out_result,vec3 scale sk_default({1,1,1}));SK_API void matrix_inverse(const sk_ref(matrix)a,sk_ref(matrix)out_matrix);SK_API matrix matrix_invert(const sk_ref(matrix)a);SK_API void matrix_mul(const sk_ref(matrix)a,const sk_ref(matrix)b,sk_ref(matrix)out_matrix);SK_API vec3 matrix_transform_pt(matrix transform,vec3 point);SK_API vec4 matrix_transform_pt4(matrix transform,vec4 point);SK_API vec3 matrix_transform_dir(matrix transform,vec3 direction);SK_API ray_t matrix_transform_ray(matrix transform,ray_t ray);SK_API quat matrix_transform_quat(matrix transform,quat rotation);SK_API pose_t matrix_transform_pose(matrix transform,pose_t pose);SK_API matrix matrix_transpose(matrix transform);SK_API vec3 matrix_to_angles(const sk_ref(matrix)transform);SK_API matrix matrix_trs(const sk_ref(vec3)position,const sk_ref(quat)orientation sk_default({0,0,0,1}),const sk_ref(vec3)scale sk_default({1,1,1}));SK_API matrix matrix_t(vec3 position);SK_API matrix matrix_r(quat orientation);SK_API matrix matrix_s(vec3 scale);SK_API matrix matrix_ts(vec3 position,vec3 scale);SK_API void matrix_trs_out(sk_ref(matrix)out_result,const sk_ref(vec3)position,const sk_ref(quat)orientation sk_default({0,0,0,1}),const sk_ref(vec3)scale sk_default({1,1,1}));SK_API matrix matrix_perspective(float fov_degrees,float aspect_ratio,float near_clip,float far_clip);SK_API matrix matrix_orthographic(float width,float height,float near_clip,float far_clip);SK_API bool32_t matrix_decompose(const sk_ref(matrix)transform,sk_ref(vec3)out_position,sk_ref(vec3)out_scale,sk_ref(quat)out_orientation);SK_API vec3 matrix_extract_translation(const sk_ref(matrix)transform);SK_API vec3 matrix_extract_scale(const sk_ref(matrix)transform);SK_API quat matrix_extract_rotation(const sk_ref(matrix)transform);SK_API pose_t matrix_extract_pose(const sk_ref(matrix)transform);SK_API bool32_t ray_intersect_plane(ray_t ray,vec3 plane_pt,vec3 plane_normal,sk_ref(float)out_t);SK_API bool32_t ray_from_mouse(vec2 screen_pixel_pos,sk_ref(ray_t)out_ray);SK_API plane_t plane_from_points(vec3 p1,vec3 p2,vec3 p3);SK_API plane_t plane_from_ray(ray_t ray);#ifdef __cplusplus static inline vec2 operator*(vec2 a,float b){return{a.x*b,a.y*b};}static inline vec2 operator*(float b,vec2 a){return{a.x*b,a.y*b};}static inline vec2 operator/(vec2 a,float b){return{a.x/b,a.y/b};}static inline vec2 operator+(vec2 a,vec2 b){return{a.x+b.x,a.y+b.y};}static inline vec2 operator-(vec2 a,vec2 b){return{a.x-b.x,a.y-b.y};}static inline vec2 operator+(vec2 a,float b){return{a.x+b,a.y+b};}static inline vec2 operator-(vec2 a,float b){return{a.x-b,a.y-b};}static inline vec2 operator*(vec2 a,vec2 b){return{a.x*b.x,a.y*b.y};}static inline vec2 operator/(vec2 a,vec2 b){return{a.x/b.x,a.y/b.y};}static inline vec2&operator+=(vec2&a,vec2 b){a.x+=b.x;a.y+=b.y;return a;}static inline vec2&operator-=(vec2&a,vec2 b){a.x-=b.x;a.y-=b.y;return a;}static inline vec2&operator*=(vec2&a,float b){a.x*=b;a.y*=b;return a;}static inline vec2&operator/=(vec2&a,float b){a.x/=b;a.y/=b;return a;}static inline vec3 operator*(vec3 a,float b){return{a.x*b,a.y*b,a.z*b};}static inline vec3 operator*(float b,vec3 a){return{a.x*b,a.y*b,a.z*b};}static inline vec3 operator/(vec3 a,float b){return{a.x/b,a.y/b,a.z/b};}static inline vec3 operator+(vec3 a,vec3 b){return{a.x+b.x,a.y+b.y,a.z+b.z};}static inline vec3 operator+(vec3 a,float b){return{a.x+b,a.y+b,a.z+b};}static inline vec3 operator-(vec3 a,vec3 b){return{a.x-b.x,a.y-b.y,a.z-b.z};}static inline vec3 operator-(vec3 a,float b){return{a.x-b,a.y-b,a.z-b};}static inline vec3 operator-(vec3 a){return{-a.x,-a.y,-a.z};}static inline vec3 operator*(vec3 a,vec3 b){return{a.x*b.x,a.y*b.y,a.z*b.z};}static inline vec3 operator/(vec3 a,vec3 b){return{a.x/b.x,a.y/b.y,a.z/b.z};}static inline vec3&operator+=(vec3&a,vec3 b){a.x+=b.x;a.y+=b.y;a.z+=b.z;return a;}static inline vec3&operator-=(vec3&a,vec3 b){a.x-=b.x;a.y-=b.y;a.z-=b.z;return a;}static inline vec3&operator*=(vec3&a,float b){a.x*=b;a.y*=b;a.z*=b;return a;}static inline vec3&operator/=(vec3&a,float b){a.x/=b;a.y/=b;a.z/=b;return a;}static inline vec4 operator*(vec4 a,float b){return{a.x*b,a.y*b,a.z*b,a.w*b};}static inline vec4 operator*(float b,vec4 a){return{a.x*b,a.y*b,a.z*b,a.w*b};}static inline vec4 operator+(vec4 a,vec4 b){return{a.x+b.x,a.y+b.y,a.z+b.z,a.w+b.w};}static inline vec3 operator*(quat a,vec3 b){return quat_mul_vec(a,b);}static inline quat operator*(quat a,quat b){return quat_mul(a,b);}static inline matrix operator*(matrix a,matrix b){matrix result;matrix_mul(a,b,result);return result;}static inline vec3 operator*(matrix a,vec3 b){return matrix_transform_pt(a,b);}static inline vec4 operator*(matrix a,vec4 b){return matrix_transform_pt4(a,b);}#endif static inline float vec4_magnitude(vec4 a){return sqrtf(a.x*a.x+a.y*a.y+a.z*a.z+a.w*a.w);}static inline float vec3_magnitude(vec3 a){return sqrtf(a.x*a.x+a.y*a.y+a.z*a.z);}static inline float vec2_magnitude(vec2 a){return sqrtf(a.x*a.x+a.y*a.y);}static inline float vec3_magnitude_sq(vec3 a){return a.x*a.x+a.y*a.y+a.z*a.z;}static inline float vec2_magnitude_sq(vec2 a){return a.x*a.x+a.y*a.y;}static inline float vec3_dot(vec3 a,vec3 b){return a.x*b.x+a.y*b.y+a.z*b.z;}static inline float vec2_dot(vec2 a,vec2 b){return a.x*b.x+a.y*b.y;}static inline float vec3_distance_sq(vec3 a,vec3 b){vec3 v={a.x-b.x,a.y-b.y,a.z-b.z};return vec3_magnitude_sq(v);}static inline float vec2_distance_sq(vec2 a,vec2 b){vec2 v={a.x-b.x,a.y-b.y};return vec2_magnitude_sq(v);}static inline float vec3_distance(vec3 a,vec3 b){vec3 v={a.x-b.x,a.y-b.y,a.z-b.z};return vec3_magnitude(v);}static inline float vec2_distance(vec2 a,vec2 b){vec2 v={a.x-b.x,a.y-b.y};return vec2_magnitude(v);}static inline vec3 vec3_project(vec3 a,vec3 onto_b){float t=vec3_dot(a,onto_b)/vec3_magnitude_sq(onto_b);vec3 v={onto_b.x*t,onto_b.y*t,onto_b.z*t};return v;}static inline vec4 vec4_normalize(vec4 a){float imag=1.0f/vec4_magnitude(a);vec4 v={a.x*imag,a.y*imag,a.z*imag,a.w*imag};return v;}static inline vec3 vec3_normalize(vec3 a){float imag=1.0f/vec3_magnitude(a);vec3 v={a.x*imag,a.y*imag,a.z*imag};return v;}static inline vec2 vec2_normalize(vec2 a){float imag=1.0f/vec2_magnitude(a);vec2 v={a.x*imag,a.y*imag};return v;}static inline vec3 vec3_abs(vec3 a){vec3 v={fabsf(a.x),fabsf(a.y),fabsf(a.z)};return v;}static inline vec2 vec2_abs(vec2 a){vec2 v={fabsf(a.x),fabsf(a.y)};return v;}static inline vec3 vec3_min(vec3 a,vec3 b){vec3 v={fminf(a.x,b.x),fminf(a.y,b.y),fminf(a.z,b.z)};return v;}static inline vec2 vec2_min(vec2 a,vec2 b){vec2 v={fminf(a.x,b.x),fminf(a.y,b.y)};return v;}static inline vec3 vec3_max(vec3 a,vec3 b){vec3 v={fmaxf(a.x,b.x),fmaxf(a.y,b.y),fmaxf(a.z,b.z)};return v;}static inline vec2 vec2_max(vec2 a,vec2 b){vec2 v={fmaxf(a.x,b.x),fmaxf(a.y,b.y)};return v;}static inline vec3 vec3_lerp(vec3 a,vec3 b,float t){vec3 v={a.x+(b.x-a.x)*t,a.y+(b.y-a.y)*t,a.z+(b.z-a.z)*t};return v;}static inline vec2 vec2_lerp(vec2 a,vec2 b,float t){vec2 v={a.x+(b.x-a.x)*t,a.y+(b.y-a.y)*t};return v;}static inline bool32_t vec3_in_radius(vec3 pt,vec3 center,float radius){return vec3_distance_sq(center,pt)<radius*radius;}static inline bool32_t vec2_in_radius(vec2 pt,vec2 center,float radius){return vec2_distance_sq(center,pt)<radius*radius;}SK_CONST float deg2rad=0.01745329252f;SK_CONST float rad2deg=57.295779513f;SK_CONST float cm2m=0.01f;SK_CONST float mm2m=0.001f;SK_CONST float m2cm=100.f;SK_CONST float m2mm=1000.f;SK_CONST vec2 vec2_zero={0,0};SK_CONST vec2 vec2_one={1,1};SK_CONST vec3 vec3_one={1,1,1};SK_CONST vec3 vec3_zero={0,0,0};SK_CONST vec3 vec3_up={0,1,0};SK_CONST vec3 vec3_forward={0,0,-1};SK_CONST vec3 vec3_right={1,0,0};SK_CONST vec3 vec3_unit_x={1,0,0};SK_CONST vec3 vec3_unit_y={0,1,0};SK_CONST vec3 vec3_unit_z={0,0,1};SK_CONST quat quat_identity={0,0,0,1};SK_CONST matrix matrix_identity={{{1,0,0,0},{0,1,0,0},{0,0,1,0},{0,0,0,1}}};SK_CONST pose_t pose_identity={{0,0,0},{0,0,0,1}};#define unit_cm(cm)((cm)*0.01f)#define unit_mm(mm)((mm)*0.001f)#define unit_dmm(dmm,distance)((dmm)*(distance))SK_API bool32_t plane_ray_intersect(plane_t plane,ray_t ray,vec3*out_pt);SK_API bool32_t plane_line_intersect(plane_t plane,vec3 p1,vec3 p2,vec3*out_pt);SK_API vec3 plane_point_closest(plane_t plane,vec3 pt);SK_API bool32_t sphere_ray_intersect(sphere_t sphere,ray_t ray,vec3*out_pt);SK_API bool32_t sphere_point_contains(sphere_t sphere,vec3 pt);SK_API bool32_t bounds_ray_intersect(bounds_t bounds,ray_t ray,vec3*out_pt);SK_API bool32_t bounds_point_contains(bounds_t bounds,vec3 pt);SK_API bool32_t bounds_line_contains(bounds_t bounds,vec3 pt1,vec3 pt2);SK_API bool32_t bounds_capsule_contains(bounds_t bounds,vec3 pt1,vec3 pt2,float radius);SK_API bounds_t bounds_grow_to_fit_pt(bounds_t bounds,vec3 pt);SK_API bounds_t bounds_grow_to_fit_box(bounds_t bounds,bounds_t box,const matrix*opt_in_box_transform sk_default(nullptr));SK_API bounds_t bounds_transform(bounds_t bounds,matrix transform);SK_API vec3 ray_point_closest(ray_t ray,vec3 pt);typedef struct color32{uint8_t r;uint8_t g;uint8_t b;uint8_t a;}color32;typedef struct color128{float r;float g;float b;float a;}color128;SK_API color128 color_hsv(float hue,float saturation,float value,float transparency);SK_API vec3 color_to_hsv(const sk_ref(color128)color);SK_API color128 color_lab(float l,float a,float b,float transparency);SK_API vec3 color_to_lab(const sk_ref(color128)color);SK_API color128 color_to_linear(color128 srgb_gamma_correct);SK_API color128 color_to_gamma(color128 srgb_linear);static inline color128 color_lerp(color128 a,color128 b,float t){color128 result={a.r+(b.r-a.r)*t,a.g+(b.g-a.g)*t,a.b+(b.b-a.b)*t,a.a+(b.a-a.a)*t};return result;}static inline color32 color_to_32(color128 a){color32 result={(uint8_t)(a.r*255.f),(uint8_t)(a.g*255.f),(uint8_t)(a.b*255.f),(uint8_t)(a.a*255.f)};return result;}static inline color128 color32_to_128(color32 color){color128 result={color.r/255.0f,color.g/255.0f,color.b/255.0f,color.a/255.0f};return result;}static inline color32 color32_hex(uint32_t hex){color32 result={(uint8_t)(hex>>24),(uint8_t)((hex>>16)&0x000000FF),(uint8_t)((hex>>8)&0x000000FF),(uint8_t)(hex&0x000000FF)};return result;};static inline color128 color_hex(uint32_t hex){return color32_to_128(color32_hex(hex));};#ifdef __cplusplus static inline color128 operator*(color128 a,float b){return{a.r*b,a.g*b,a.b*b,a.a*b};}static inline color128 operator*(color128 a,color128 b){return{a.r*b.r,a.g*b.g,a.b*b.b,a.a*b.a};}#endif SK_DeclarePrivateType(gradient_t);SK_DeclarePrivateType(mesh_t);SK_DeclarePrivateType(tex_t);SK_DeclarePrivateType(font_t);SK_DeclarePrivateType(shader_t);SK_DeclarePrivateType(material_t);SK_DeclarePrivateType(material_buffer_t);SK_DeclarePrivateType(model_t);SK_DeclarePrivateType(sprite_t);SK_DeclarePrivateType(sound_t);SK_DeclarePrivateType(anchor_t);SK_DeclarePrivateType(render_list_t);typedef struct gradient_key_t{color128 color;float position;}gradient_key_t;SK_API gradient_t gradient_create(void);SK_API gradient_t gradient_create_keys(const gradient_key_t*in_arr_keys,int32_t count);SK_API void gradient_add(gradient_t gradient,color128 color_linear,float position);SK_API void gradient_set(gradient_t gradient,int32_t index,color128 color_linear,float position);SK_API void gradient_remove(gradient_t gradient,int32_t index);SK_API int32_t gradient_count(gradient_t gradient);SK_API color128 gradient_get(gradient_t gradient,float at);SK_API color32 gradient_get32(gradient_t gradient,float at);SK_API void gradient_destroy(gradient_t gradient);typedef struct spherical_harmonics_t{vec3 coefficients[9];}spherical_harmonics_t;typedef struct sh_light_t{vec3 dir_to;color128 color;}sh_light_t;SK_API spherical_harmonics_t sh_create(const sh_light_t*in_arr_lights,int32_t light_count);SK_API void sh_brightness(sk_ref(spherical_harmonics_t)ref_harmonics,float scale);SK_API void sh_add(sk_ref(spherical_harmonics_t)ref_harmonics,vec3 light_dir,vec3 light_color);SK_API color128 sh_lookup(const sk_ref(spherical_harmonics_t)harmonics,vec3 normal);SK_API vec3 sh_dominant_dir(const sk_ref(spherical_harmonics_t)harmonics);typedef struct vert_t{vec3 pos;vec3 norm;vec2 uv;color32 col;}vert_t;static inline vert_t vert_create(vec3 position,vec3 normal sk_default({0,1,0}),vec2 texture_coordinates sk_default({0,0}),color32 vertex_color sk_default({255,255,255,255})){vert_t v={position,normal,texture_coordinates,vertex_color};return v;}typedef uint32_t vind_t;typedef enum cull_{cull_back=0,cull_front,cull_none,}cull_;SK_API mesh_t mesh_find(const char*name);SK_API mesh_t mesh_create(void);SK_API mesh_t mesh_copy(mesh_t mesh);SK_API void mesh_set_id(mesh_t mesh,const char*id);SK_API const char*mesh_get_id(const mesh_t mesh);SK_API void mesh_addref(mesh_t mesh);SK_API void mesh_release(mesh_t mesh);SK_API void mesh_draw(mesh_t mesh,material_t material,matrix transform,color128 color_linear sk_default({1,1,1,1}),render_layer_ layer sk_default(render_layer_0));SK_API void mesh_set_keep_data(mesh_t mesh,bool32_t keep_data);SK_API bool32_t mesh_get_keep_data(mesh_t mesh);SK_API void mesh_set_data(mesh_t mesh,const vert_t*in_arr_vertices,int32_t vertex_count,const vind_t*in_arr_indices,int32_t index_count,bool32_t calculate_bounds sk_default(true));SK_API void mesh_set_verts(mesh_t mesh,const vert_t*in_arr_vertices,int32_t vertex_count,bool32_t calculate_bounds sk_default(true));SK_API void mesh_get_verts(mesh_t mesh,sk_ref_arr(vert_t)out_arr_vertices,sk_ref(int32_t)out_vertex_count,memory_ reference_mode);SK_API int32_t mesh_get_vert_count(mesh_t mesh);SK_API void mesh_set_inds(mesh_t mesh,const vind_t*in_arr_indices,int32_t index_count);SK_API void mesh_get_inds(mesh_t mesh,sk_ref_arr(vind_t)out_arr_indices,sk_ref(int32_t)out_index_count,memory_ reference_mode);SK_API int32_t mesh_get_ind_count(mesh_t mesh);SK_API void mesh_set_draw_inds(mesh_t mesh,int32_t index_count);SK_API void mesh_set_bounds(mesh_t mesh,const sk_ref(bounds_t)bounds);SK_API bounds_t mesh_get_bounds(mesh_t mesh);SK_API bool32_t mesh_has_skin(mesh_t mesh);SK_API void mesh_set_skin(mesh_t mesh,const uint16_t*in_arr_bone_ids_4,int32_t bone_id_4_count,const vec4*in_arr_bone_weights,int32_t bone_weight_count,const matrix*bone_resting_transforms,int32_t bone_count);SK_API void mesh_update_skin(mesh_t mesh,const matrix*in_arr_bone_transforms,int32_t bone_count);SK_API bool32_t mesh_ray_intersect(mesh_t mesh,ray_t model_space_ray,cull_ cull_mode,ray_t*out_pt,uint32_t*out_opt_start_inds sk_default(nullptr));SK_API bool32_t mesh_ray_intersect_bvh(mesh_t mesh,ray_t model_space_ray,cull_ cull_mode,ray_t*out_pt,uint32_t*out_start_inds sk_default(nullptr));SK_API bool32_t mesh_get_triangle(mesh_t mesh,uint32_t triangle_index,vert_t*out_a,vert_t*out_b,vert_t*out_c);SK_API mesh_t mesh_gen_plane(vec2 dimensions,vec3 plane_normal,vec3 plane_top_direction,int32_t subdivisions sk_default(0),bool32_t double_sided sk_default(false));SK_API mesh_t mesh_gen_circle(float diameter,vec3 plane_normal,vec3 plane_top_direction,int32_t spokes sk_default(16),bool32_t double_sided sk_default(false));SK_API mesh_t mesh_gen_cube(vec3 dimensions,int32_t subdivisions sk_default(0));SK_API mesh_t mesh_gen_sphere(float diameter,int32_t subdivisions sk_default(4));SK_API mesh_t mesh_gen_rounded_cube(vec3 dimensions,float edge_radius,int32_t subdivisions);SK_API mesh_t mesh_gen_cylinder(float diameter,float depth,vec3 direction,int32_t subdivisions sk_default(16));SK_API mesh_t mesh_gen_cone(float diameter,float depth,vec3 direction,int32_t subdivisions sk_default(16));typedef enum tex_type_{tex_type_image_nomips=1<<0,tex_type_cubemap=1<<1,tex_type_rendertarget=1<<2,tex_type_depth=1<<3,tex_type_zbuffer=1<<3,tex_type_mips=1<<4,tex_type_dynamic=1<<5,tex_type_depthtarget=1<<6,tex_type_image=tex_type_image_nomips|tex_type_mips,}tex_type_;SK_MakeFlag(tex_type_);typedef enum tex_sample_{tex_sample_linear=0,tex_sample_point,tex_sample_anisotropic}tex_sample_;typedef enum tex_sample_comp_{tex_sample_comp_none=0,tex_sample_comp_less,tex_sample_comp_less_or_eq,tex_sample_comp_greater,tex_sample_comp_greater_or_eq,tex_sample_comp_equal,tex_sample_comp_not_equal,tex_sample_comp_always,tex_sample_comp_never,}tex_sample_comp_;typedef enum tex_address_{tex_address_wrap=0,tex_address_clamp,tex_address_mirror,}tex_address_;SK_API tex_t tex_find(const char*id);SK_API tex_t tex_create(tex_type_ type sk_default(tex_type_image),tex_format_ format sk_default(tex_format_rgba32));SK_API tex_t tex_create_rendertarget(int32_t width,int32_t height,int32_t msaa sk_default(1),tex_format_ color_format sk_default(tex_format_rgba32),tex_format_ depth_format sk_default(tex_format_depth16));SK_API tex_t tex_create_color32(color32*in_arr_data,int32_t width,int32_t height,bool32_t srgb_data sk_default(true));SK_API tex_t tex_create_color128(color128*in_arr_data,int32_t width,int32_t height,bool32_t srgb_data sk_default(true));SK_API tex_t tex_create_mem(void*data,size_t data_size,bool32_t srgb_data sk_default(true),int32_t priority sk_default(10));SK_API tex_t tex_create_file(const char*file_utf8,bool32_t srgb_data sk_default(true),int32_t priority sk_default(10));SK_API tex_t tex_create_file_arr(const char**in_arr_files,int32_t file_count,bool32_t srgb_data sk_default(true),int32_t priority sk_default(10));SK_API tex_t tex_create_cubemap_file(const char*cubemap_file_utf8,bool32_t srgb_data sk_default(true),int32_t priority sk_default(10));SK_API tex_t tex_create_cubemap_files(const char**in_arr_cube_face_file_xxyyzz,bool32_t srgb_data sk_default(true),int32_t priority sk_default(10));SK_API tex_t tex_copy(const tex_t texture,tex_type_ type sk_default(tex_type_image),tex_format_ format sk_default(tex_format_none));SK_API bool32_t tex_gen_mips(tex_t texture);SK_API void tex_set_id(tex_t texture,const char*id);SK_API const char*tex_get_id(const tex_t texture);SK_API void tex_set_fallback(tex_t texture,tex_t fallback);SK_API void tex_set_surface(tex_t texture,void*native_surface,tex_type_ type,int64_t native_fmt,int32_t width,int32_t height,int32_t surface_count,int32_t multisample sk_default(1),int32_t framebuffer_multisample sk_default(1),bool32_t owned sk_default(true));SK_API void*tex_get_surface(tex_t texture);SK_API void tex_addref(tex_t texture);SK_API void tex_release(tex_t texture);SK_API asset_state_ tex_asset_state(const tex_t texture);SK_API void tex_on_load(tex_t texture,void(*asset_on_load_callback)(tex_t texture,void*context),void*context);SK_API void tex_on_load_remove(tex_t texture,void(*asset_on_load_callback)(tex_t texture,void*context));SK_API void tex_set_colors(tex_t texture,int32_t width,int32_t height,void*data);SK_API void tex_set_color_arr(tex_t texture,int32_t width,int32_t height,void**array_data,int32_t array_count,int32_t multisample sk_default(1));SK_API void tex_set_color_arr_mips(tex_t texture,int32_t width,int32_t height,void**array_data,int32_t array_count,int32_t mip_count,int32_t multisample sk_default(1));SK_API void tex_set_mem(tex_t texture,void*data,size_t data_size,bool32_t srgb_data sk_default(true),bool32_t blocking sk_default(false),int32_t priority sk_default(10));SK_API void tex_add_zbuffer(tex_t texture,tex_format_ format sk_default(tex_format_depthstencil));SK_API void tex_set_zbuffer(tex_t texture,tex_t depth_texture);SK_API tex_t tex_get_zbuffer(tex_t texture);SK_API void tex_get_data(tex_t texture,void*ref_color_buffer,size_t color_buffer_size,int32_t mip_level sk_default(0));SK_API tex_t tex_gen_color(color128 color,int32_t width,int32_t height,tex_type_ type sk_default(tex_type_image),tex_format_ format sk_default(tex_format_rgba32));SK_API tex_t tex_gen_particle(int32_t width,int32_t height,float roundness sk_default(1),gradient_t gradient_linear sk_default(nullptr));SK_API tex_t tex_gen_cubemap(const gradient_t gradient,vec3 gradient_dir,int32_t resolution);SK_API tex_t tex_gen_cubemap_sh(const sk_ref(spherical_harmonics_t)lookup,int32_t face_size,float light_spot_size_pct sk_default(0),float light_spot_intensity sk_default(6));SK_API tex_format_ tex_get_format(tex_t texture);SK_API int32_t tex_get_width(tex_t texture);SK_API int32_t tex_get_height(tex_t texture);SK_API void tex_set_sample(tex_t texture,tex_sample_ sample sk_default(tex_sample_linear));SK_API tex_sample_ tex_get_sample(tex_t texture);SK_API void tex_set_sample_comp(tex_t texture,tex_sample_comp_ compare sk_default(tex_sample_comp_none));SK_API tex_sample_comp_ tex_get_sample_comp(tex_t texture);SK_API void tex_set_address(tex_t texture,tex_address_ address_mode sk_default(tex_address_wrap));SK_API tex_address_ tex_get_address(tex_t texture);SK_API void tex_set_anisotropy(tex_t texture,int32_t anisotropy_level sk_default(4));SK_API int32_t tex_get_anisotropy(tex_t texture);SK_API int32_t tex_get_mips(tex_t texture);SK_API void tex_set_loading_fallback(tex_t loading_texture);SK_API void tex_set_error_fallback(tex_t error_texture);SK_API spherical_harmonics_t tex_get_cubemap_lighting(tex_t cubemap_texture);SK_API font_t font_find(const char*id);SK_API font_t font_create(const char*file_utf8);SK_API font_t font_create_files(const char**in_arr_files,int32_t file_count);SK_API void font_set_id(font_t font,const char*id);SK_API const char*font_get_id(const font_t font);SK_API void font_addref(font_t font);SK_API void font_release(font_t font);SK_API tex_t font_get_tex(font_t font);SK_API font_t font_create_family(const char*font_family);SK_API shader_t shader_find(const char*id);SK_API shader_t shader_create_file(const char*filename_utf8);SK_API shader_t shader_create_mem(void*data,size_t data_size);SK_API void shader_set_id(shader_t shader,const char*id);SK_API const char*shader_get_id(const shader_t shader);SK_API const char*shader_get_name(shader_t shader);SK_API void shader_addref(shader_t shader);SK_API void shader_release(shader_t shader);typedef enum transparency_{transparency_none=1,transparency_msaa=2,transparency_blend=3,transparency_add=4,}transparency_;typedef enum depth_test_{depth_test_less=0,depth_test_less_or_eq,depth_test_greater,depth_test_greater_or_eq,depth_test_equal,depth_test_not_equal,depth_test_always,depth_test_never,}depth_test_;typedef enum material_param_{material_param_unknown=0,material_param_float=1,material_param_color128=2,material_param_vector2=3,material_param_vector3=4,material_param_vector4=5,material_param_matrix=6,material_param_texture=7,material_param_int=8,material_param_int2=9,material_param_int3=10,material_param_int4=11,material_param_uint=12,material_param_uint2=13,material_param_uint3=14,material_param_uint4=15,}material_param_;SK_API material_t material_find(const char*id);SK_API material_t material_create(shader_t shader);SK_API material_t material_copy(material_t material);SK_API material_t material_copy_id(const char*id);SK_API void material_set_id(material_t material,const char*id);SK_API const char*material_get_id(const material_t material);SK_API void material_addref(material_t material);SK_API void material_release(material_t material);SK_API void material_set_transparency(material_t material,transparency_ mode);SK_API void material_set_cull(material_t material,cull_ mode);SK_API void material_set_wireframe(material_t material,bool32_t wireframe);SK_API void material_set_depth_test(material_t material,depth_test_ depth_test_mode);SK_API void material_set_depth_write(material_t material,bool32_t write_enabled);SK_API void material_set_depth_clip(material_t material,bool32_t clip_enabled);SK_API void material_set_queue_offset(material_t material,int32_t offset);SK_API void material_set_chain(material_t material,material_t chain_material);SK_API void material_set_variant(material_t material,int32_t variant_idx,material_t variant_material);SK_API transparency_ material_get_transparency(material_t material);SK_API cull_ material_get_cull(material_t material);SK_API bool32_t material_get_wireframe(material_t material);SK_API depth_test_ material_get_depth_test(material_t material);SK_API bool32_t material_get_depth_write(material_t material);SK_API bool32_t material_get_depth_clip(material_t material);SK_API int32_t material_get_queue_offset(material_t material);SK_API material_t material_get_chain(material_t material);SK_API material_t material_get_variant(material_t material,int32_t variant_idx);SK_API void material_set_float(material_t material,const char*name,float value);SK_API void material_set_vector2(material_t material,const char*name,vec2 value);SK_API void material_set_vector3(material_t material,const char*name,vec3 value);SK_API void material_set_color(material_t material,const char*name,color128 color_gamma);SK_API void material_set_vector4(material_t material,const char*name,vec4 value);SK_API void material_set_int(material_t material,const char*name,int32_t value);SK_API void material_set_int2(material_t material,const char*name,int32_t value1,int32_t value2);SK_API void material_set_int3(material_t material,const char*name,int32_t value1,int32_t value2,int32_t value3);SK_API void material_set_int4(material_t material,const char*name,int32_t value1,int32_t value2,int32_t value3,int32_t value4);SK_API void material_set_bool(material_t material,const char*name,bool32_t value);SK_API void material_set_uint(material_t material,const char*name,uint32_t value);SK_API void material_set_uint2(material_t material,const char*name,uint32_t value1,uint32_t value2);SK_API void material_set_uint3(material_t material,const char*name,uint32_t value1,uint32_t value2,uint32_t value3);SK_API void material_set_uint4(material_t material,const char*name,uint32_t value1,uint32_t value2,uint32_t value3,uint32_t value4);SK_API void material_set_matrix(material_t material,const char*name,matrix value);SK_API bool32_t material_set_texture(material_t material,const char*name,tex_t value);SK_API bool32_t material_set_texture_id(material_t material,id_hash_t id,tex_t value);SK_API float material_get_float(material_t material,const char*name);SK_API vec2 material_get_vector2(material_t material,const char*name);SK_API vec3 material_get_vector3(material_t material,const char*name);SK_API color128 material_get_color(material_t material,const char*name);SK_API vec4 material_get_vector4(material_t material,const char*name);SK_API int32_t material_get_int(material_t material,const char*name);SK_API bool32_t material_get_bool(material_t material,const char*name);SK_API uint32_t material_get_uint(material_t material,const char*name);SK_API matrix material_get_matrix(material_t material,const char*name);SK_API tex_t material_get_texture(material_t material,const char*name);SK_API bool32_t material_has_param(material_t material,const char*name,material_param_ type);SK_API void material_set_param(material_t material,const char*name,material_param_ type,const void*value);SK_API void material_set_param_id(material_t material,id_hash_t id,material_param_ type,const void*value);SK_API bool32_t material_get_param(material_t material,const char*name,material_param_ type,void*out_value);SK_API bool32_t material_get_param_id(material_t material,id_hash_t id,material_param_ type,void*out_value);SK_API void material_get_param_info(material_t material,int32_t index,char**out_name,material_param_*out_type);SK_API int32_t material_get_param_count(material_t material);SK_API void material_set_shader(material_t material,shader_t shader);SK_API shader_t material_get_shader(material_t material);SK_API material_buffer_t material_buffer_create(int32_t size);SK_API void material_buffer_addref(material_buffer_t buffer);SK_API void material_buffer_release(material_buffer_t buffer);SK_API void material_buffer_set_data(material_buffer_t buffer,const void*buffer_data);typedef enum text_fit_{text_fit_none=0,text_fit_wrap=1<<0,text_fit_clip=1<<1,text_fit_squeeze=1<<2,text_fit_exact=1<<3,text_fit_overflow=1<<4}text_fit_;SK_MakeFlag(text_fit_)SK_DEPRECATED typedef enum text_align_{text_align_x_left=1<<0,text_align_y_top=1<<1,text_align_x_center=1<<2,text_align_y_center=1<<3,text_align_x_right=1<<4,text_align_y_bottom=1<<5,text_align_center=text_align_x_center|text_align_y_center,text_align_center_left=text_align_x_left|text_align_y_center,text_align_center_right=text_align_x_right|text_align_y_center,text_align_top_center=text_align_x_center|text_align_y_top,text_align_top_left=text_align_x_left|text_align_y_top,text_align_top_right=text_align_x_right|text_align_y_top,text_align_bottom_center=text_align_x_center|text_align_y_bottom,text_align_bottom_left=text_align_x_left|text_align_y_bottom,text_align_bottom_right=text_align_x_right|text_align_y_bottom,}text_align_;typedef enum align_{align_x_left=1<<0,align_y_top=1<<1,align_x_center=1<<2,align_y_center=1<<3,align_x_right=1<<4,align_y_bottom=1<<5,align_center=align_x_center|align_y_center,align_center_left=align_x_left|align_y_center,align_center_right=align_x_right|align_y_center,align_top_center=align_x_center|align_y_top,align_top_left=align_x_left|align_y_top,align_top_right=align_x_right|align_y_top,align_bottom_center=align_x_center|align_y_bottom,align_bottom_left=align_x_left|align_y_bottom,align_bottom_right=align_x_right|align_y_bottom,}align_;SK_MakeFlag(align_);typedef enum pivot_{pivot_x_left=1<<0,pivot_y_top=1<<1,pivot_x_center=1<<2,pivot_y_center=1<<3,pivot_x_right=1<<4,pivot_y_bottom=1<<5,pivot_center=pivot_x_center|pivot_y_center,pivot_center_left=pivot_x_left|pivot_y_center,pivot_center_right=pivot_x_right|pivot_y_center,pivot_top_center=pivot_x_center|pivot_y_top,pivot_top_left=pivot_x_left|pivot_y_top,pivot_top_right=pivot_x_right|pivot_y_top,pivot_bottom_center=pivot_x_center|pivot_y_bottom,pivot_bottom_left=pivot_x_left|pivot_y_bottom,pivot_bottom_right=pivot_x_right|pivot_y_bottom,}pivot_;SK_MakeFlag(pivot_);typedef uint32_t text_style_t;SK_API text_style_t text_make_style(font_t font,float layout_height,color128 color_gamma);SK_API text_style_t text_make_style_shader(font_t font,float layout_height,shader_t shader,color128 color_gamma);SK_API text_style_t text_make_style_mat(font_t font,float layout_height,material_t material,color128 color_gamma);SK_API void text_add_at(const char*text_utf8,const sk_ref(matrix)transform,text_style_t style sk_default(0),pivot_ position sk_default(pivot_center),align_ align sk_default(align_center),float off_x sk_default(0),float off_y sk_default(0),float off_z sk_default(0),color128 vertex_tint_linear sk_default({1,1,1,1}));SK_API void text_add_at_16(const char16_t*text_utf16,const sk_ref(matrix)transform,text_style_t style sk_default(0),pivot_ position sk_default(pivot_center),align_ align sk_default(align_center),float off_x sk_default(0),float off_y sk_default(0),float off_z sk_default(0),color128 vertex_tint_linear sk_default({1,1,1,1}));SK_API float text_add_in(const char*text_utf8,const sk_ref(matrix)transform,vec2 size,text_fit_ fit,text_style_t style sk_default(0),pivot_ position sk_default(pivot_center),align_ align sk_default(align_center),float off_x sk_default(0),float off_y sk_default(0),float off_z sk_default(0),color128 vertex_tint_linear sk_default({1,1,1,1}));SK_API float text_add_in_16(const char16_t*text_utf16,const sk_ref(matrix)transform,vec2 size,text_fit_ fit,text_style_t style sk_default(0),pivot_ position sk_default(pivot_center),align_ align sk_default(align_center),float off_x sk_default(0),float off_y sk_default(0),float off_z sk_default(0),color128 vertex_tint_linear sk_default({1,1,1,1}));SK_API vec2 text_size_layout(const char*text_utf8,text_style_t style sk_default(0));SK_API vec2 text_size_layout_16(const char16_t*text_utf16,text_style_t style sk_default(0));SK_API vec2 text_size_layout_constrained(const char*text_utf8,text_style_t style,float max_width);SK_API vec2 text_size_layout_constrained_16(const char16_t*text_utf16,text_style_t style,float max_width);SK_API vec2 text_size_render(vec2 layout_size,text_style_t style,float*out_y_offset);SK_API vec2 text_char_at(const char*text_utf8,text_style_t style,int32_t char_index,vec2*opt_size,text_fit_ fit,pivot_ position,align_ align);SK_API vec2 text_char_at_16(const char16_t*text_utf16,text_style_t style,int32_t char_index,vec2*opt_size,text_fit_ fit,pivot_ position,align_ align);SK_API float text_style_get_line_height_pct(text_style_t style);SK_API void text_style_set_line_height_pct(text_style_t style,float height_percentage);SK_API float text_style_get_layout_height(text_style_t style);SK_API void text_style_set_layout_height(text_style_t style,float height_meters);SK_API float text_style_get_total_height(text_style_t style);SK_API void text_style_set_total_height(text_style_t style,float height_meters);SK_API material_t text_style_get_material(text_style_t style);SK_API float text_style_get_ascender(text_style_t style);SK_API float text_style_get_descender(text_style_t style);SK_API float text_style_get_cap_height(text_style_t style);SK_API float text_style_get_baseline(text_style_t style);typedef int32_t model_node_id;typedef enum anim_mode_{anim_mode_loop,anim_mode_once,anim_mode_manual,}anim_mode_;SK_API model_t model_find(const char*id);SK_API model_t model_copy(model_t model);SK_API model_t model_create(void);SK_API model_t model_create_mesh(mesh_t mesh,material_t material);SK_API model_t model_create_mem(const char*filename_utf8,const void*data,size_t data_size,shader_t shader sk_default(nullptr));SK_API model_t model_create_file(const char*filename_utf8,shader_t shader sk_default(nullptr));SK_API void model_set_id(model_t model,const char*id);SK_API const char*model_get_id(const model_t model);SK_API void model_addref(model_t model);SK_API void model_release(model_t model);SK_API void model_draw(model_t model,matrix transform,color128 color_linear sk_default({1,1,1,1}),render_layer_ layer sk_default(render_layer_0));SK_API void model_draw_mat(model_t model,material_t material_override,matrix transform,color128 color_linear sk_default({1,1,1,1}),render_layer_ layer sk_default(render_layer_0));SK_API void model_recalculate_bounds(model_t model);SK_API void model_recalculate_bounds_exact(model_t model);SK_API void model_set_bounds(model_t model,const sk_ref(bounds_t)bounds);SK_API bounds_t model_get_bounds(model_t model);SK_API bool32_t model_ray_intersect(model_t model,ray_t model_space_ray,cull_ cull_mode,ray_t*out_pt);SK_API bool32_t model_ray_intersect_bvh(model_t model,ray_t model_space_ray,cull_ cull_mode,ray_t*out_pt);SK_API bool32_t model_ray_intersect_bvh_detailed(model_t model,ray_t model_space_ray,cull_ cull_mode,ray_t*out_pt,mesh_t*out_opt_mesh sk_default(nullptr),matrix*out_opt_matrix sk_default(nullptr),uint32_t*out_opt_start_inds sk_default(nullptr));SK_API void model_step_anim(model_t model);SK_API bool32_t model_play_anim(model_t model,const char*animation_name,anim_mode_ mode);SK_API void model_play_anim_idx(model_t model,int32_t index,anim_mode_ mode);SK_API void model_set_anim_time(model_t model,float time);SK_API void model_set_anim_completion(model_t model,float percent);SK_API int32_t model_anim_find(model_t model,const char*animation_name);SK_API int32_t model_anim_count(model_t model);SK_API int32_t model_anim_active(model_t model);SK_API anim_mode_ model_anim_active_mode(model_t model);SK_API float model_anim_active_time(model_t model);SK_API float model_anim_active_completion(model_t model);SK_API const char*model_anim_get_name(model_t model,int32_t index);SK_API float model_anim_get_duration(model_t model,int32_t index);SK_API model_node_id model_node_add(model_t model,const char*name,matrix model_transform,mesh_t mesh sk_default(nullptr),material_t material sk_default(nullptr),bool32_t solid sk_default(true));SK_API model_node_id model_node_add_child(model_t model,model_node_id parent,const char*name,matrix local_transform,mesh_t mesh sk_default(nullptr),material_t material sk_default(nullptr),bool32_t solid sk_default(true));SK_API model_node_id model_node_find(model_t model,const char*name);SK_API model_node_id model_node_sibling(model_t model,model_node_id node);SK_API model_node_id model_node_parent(model_t model,model_node_id node);SK_API model_node_id model_node_child(model_t model,model_node_id node);SK_API int32_t model_node_count(model_t model);SK_API model_node_id model_node_index(model_t model,int32_t index);SK_API int32_t model_node_visual_count(model_t model);SK_API model_node_id model_node_visual_index(model_t model,int32_t index);SK_API model_node_id model_node_iterate(model_t model,model_node_id node);SK_API model_node_id model_node_get_root(model_t model);SK_API const char*model_node_get_name(model_t model,model_node_id node);SK_API bool32_t model_node_get_solid(model_t model,model_node_id node);SK_API bool32_t model_node_get_visible(model_t model,model_node_id node);SK_API material_t model_node_get_material(model_t model,model_node_id node);SK_API mesh_t model_node_get_mesh(model_t model,model_node_id node);SK_API matrix model_node_get_transform_model(model_t model,model_node_id node);SK_API matrix model_node_get_transform_local(model_t model,model_node_id node);SK_API void model_node_set_name(model_t model,model_node_id node,const char*name);SK_API void model_node_set_solid(model_t model,model_node_id node,bool32_t solid);SK_API void model_node_set_visible(model_t model,model_node_id node,bool32_t visible);SK_API void model_node_set_material(model_t model,model_node_id node,material_t material);SK_API void model_node_set_mesh(model_t model,model_node_id node,mesh_t mesh);SK_API void model_node_set_transform_model(model_t model,model_node_id node,matrix transform_model_space);SK_API void model_node_set_transform_local(model_t model,model_node_id node,matrix transform_local_space);SK_API const char*model_node_info_get(model_t model,model_node_id node,const char*info_key_utf8);SK_API void model_node_info_set(model_t model,model_node_id node,const char*info_key_utf8,const char*info_value_utf8);SK_API bool32_t model_node_info_remove(model_t model,model_node_id node,const char*info_key_utf8);SK_API void model_node_info_clear(model_t model,model_node_id node);SK_API int32_t model_node_info_count(model_t model,model_node_id node);SK_API bool32_t model_node_info_iterate(model_t model,model_node_id node,int32_t*ref_iterator,const char**out_key_utf8,const char**out_value_utf8);typedef enum sprite_type_{sprite_type_atlased=0,sprite_type_single}sprite_type_;SK_API sprite_t sprite_find(const char*id);SK_API sprite_t sprite_create(tex_t sprite,sprite_type_ type sk_default(sprite_type_atlased),const char*atlas_id sk_default("default"));SK_API sprite_t sprite_create_file(const char*filename_utf8,sprite_type_ type sk_default(sprite_type_atlased),const char*atlas_id sk_default("default"));SK_API void sprite_set_id(sprite_t sprite,const char*id);SK_API const char*sprite_get_id(const sprite_t sprite);SK_API void sprite_addref(sprite_t sprite);SK_API void sprite_release(sprite_t sprite);SK_API float sprite_get_aspect(sprite_t sprite);SK_API int32_t sprite_get_width(sprite_t sprite);SK_API int32_t sprite_get_height(sprite_t sprite);SK_API vec2 sprite_get_dimensions_normalized(sprite_t sprite);SK_API void sprite_draw(sprite_t sprite,matrix transform,pivot_ pivot_position,color32 color sk_default({255,255,255,255}));typedef struct line_point_t{vec3 pt;float thickness;color32 color;}line_point_t;SK_API void line_add(vec3 start,vec3 end,color32 color_start,color32 color_end,float thickness);SK_API void line_addv(line_point_t start,line_point_t end);SK_API void line_add_axis(pose_t pose,float size);SK_API void line_add_list(const vec3*points,int32_t count,color32 color,float thickness);SK_API void line_add_listv(const line_point_t*in_arr_points,int32_t count);typedef enum render_clear_{render_clear_none=0,render_clear_color=1<<0,render_clear_depth=1<<1,render_clear_all=render_clear_color|render_clear_depth,}render_clear_;SK_MakeFlag(render_clear_)typedef enum projection_{projection_perspective=0,projection_ortho=1}projection_;SK_API void render_set_clip(float near_plane sk_default(0.08f),float far_plane sk_default(50));SK_API void render_get_clip(float*out_near_plane,float*out_far_plane);SK_API void render_set_fov(float vertical_field_of_view_degrees sk_default(90.0f));SK_API float render_get_fov(void);SK_API void render_set_ortho_clip(float near_plane sk_default(0.0f),float far_plane sk_default(50));SK_API void render_set_ortho_size(float viewport_height_meters);SK_API float render_get_ortho_size(void);SK_API void render_set_projection(projection_ proj);SK_API projection_ render_get_projection(void);SK_API matrix render_get_cam_root(void);SK_API void render_set_cam_root(const sk_ref(matrix)cam_root);SK_API void render_set_skytex(tex_t sky_texture);SK_API tex_t render_get_skytex(void);SK_API void render_set_skymaterial(material_t sky_material);SK_API material_t render_get_skymaterial(void);SK_API void render_set_skylight(const sk_ref(spherical_harmonics_t)light_info);SK_API spherical_harmonics_t render_get_skylight(void);SK_API void render_set_filter(render_layer_ layer_filter);SK_API render_layer_ render_get_filter(void);SK_API void render_set_scaling(float display_tex_scale);SK_API float render_get_scaling(void);SK_API void render_set_viewport_scaling(float viewport_rect_scale);SK_API float render_get_viewport_scaling(void);SK_API void render_set_multisample(int32_t display_tex_multisample);SK_API int32_t render_get_multisample(void);SK_API void render_override_capture_filter(bool32_t use_override_filter,render_layer_ layer_filter sk_default(render_layer_all));SK_API render_layer_ render_get_capture_filter(void);SK_API bool32_t render_has_capture_filter(void);SK_API void render_set_clear_color(color128 color_gamma);SK_API color128 render_get_clear_color(void);SK_API void render_enable_skytex(bool32_t show_sky);SK_API bool32_t render_enabled_skytex(void);SK_API void render_global_texture(int32_t register_slot,tex_t texture);SK_API void render_global_buffer(int32_t register_slot,material_buffer_t buffer);SK_API void render_add_mesh(mesh_t mesh,material_t material,const sk_ref(matrix)transform,color128 color_linear sk_default({1,1,1,1}),render_layer_ layer sk_default(render_layer_0));SK_API void render_add_model(model_t model,const sk_ref(matrix)transform,color128 color_linear sk_default({1,1,1,1}),render_layer_ layer sk_default(render_layer_0));SK_API void render_add_model_mat(model_t model,material_t material_override,const sk_ref(matrix)transform,color128 color_linear sk_default({1,1,1,1}),render_layer_ layer sk_default(render_layer_0));SK_API void render_blit(tex_t to_rendertarget,material_t material);SK_API void render_screenshot(const char*file_utf8,int32_t file_quality_100,pose_t viewpoint,int32_t width,int32_t height,float field_of_view_degrees);SK_API void render_screenshot_capture(void(*render_on_screenshot_callback)(color32*color_buffer,int32_t width,int32_t height,void*context),pose_t viewpoint,int32_t width,int32_t height,float field_of_view_degrees,tex_format_ tex_format sk_default(tex_format_rgba32),void*context sk_default(nullptr));SK_API void render_screenshot_viewpoint(void(*render_on_screenshot_callback)(color32*color_buffer,int32_t width,int32_t height,void*context),matrix camera,matrix projection,int32_t width,int32_t height,render_layer_ layer_filter sk_default(render_layer_all),render_clear_ clear sk_default(render_clear_all),rect_t viewport sk_default(rect_t{}, tex_format_ tex_format = tex_format_rgba32, void* context = nullptr)
	[LibraryImport(dll)][UnmanagedCallConv(CallConvs = new[] { typeof(CallConvCdecl) })] public static partial void render_screenshot_viewpoint(RenderOnScreenshotCallback renderOnScreenshotCallback, Matrix camera, Matrix projection, int width, int height, RenderLayer layerFilter, RenderClear clear, Rect viewport, TexFormat texFormat, IntPtr context);
}

